@model LexiconMVCData.ViewModels.PeopleViewModel

@{
    ViewData["Title"] = "People";
}

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}

<partial name="_ValidationScriptsPartial" />

<hr class="mt-5">
<h1>People</h1>

<br />

<div class="m-3 w-25">
    <h2>Search</h2>
    <div>
        <form class="form-inline" asp-action="Index" method="get">
            <div class="input-group mb-2 mr-sm-2">
                <!--<label asp-for="SearchString" class="mr-sm-2"></label>-->
                <input asp-for="SearchString" class="form-control" />
            </div>
            <div>
                <input type="submit" class="btn btn-primary mb-2 mr-sm-2" value="Filter" />
            </div>
        </form>
    </div>
</div>

<hr class="mt-5">

<div class="m-3 w-25">
    <h2>Create new Person</h2>
    <form class="form" asp-action="Create" method="post">
        <div class="form-group">
            <label asp-for="CreatePerson.Name"></label>
            <input asp-for="CreatePerson.Name" class="form-control" />
            <span asp-validation-for="CreatePerson.Name"></span>
        </div>
        <div class="form-group">
            <label asp-for="CreatePerson.PhoneNumber"></label>
            <input asp-for="CreatePerson.PhoneNumber" class="form-control" />
            <span asp-validation-for="CreatePerson.PhoneNumber"></span>
        </div>
        <div class="form-group">
            <label asp-for="CreatePerson.CityIdString" class="mb-2 mr-sm-2"></label>
            <select asp-for="CreatePerson.CityIdString" asp-items="Model.Citites" class="btn btn-primary dropdown-toggle"></select>
            <span asp-validation-for="CreatePerson.CityIdString"></span>
        </div>
        <div>
            <input type="submit" value="Add Person" class="btn btn-primary mb-2 mr-sm-2" />
        </div>
    </form>
</div>

<hr class="mt-5">

<div class="m-3 w-50">
    <h2>People List</h2>
    <div class="container-fluid">
        <div class="row ">
            <div class="col-1 font-weight-bold">Id</div>
            <div class="col-2 font-weight-bold"><a asp-action="Index" asp-route-sortOrder="@Model.SortByName">@Html.DisplayNameFor(model => model.SortByName)</a></div>
            <div class="col-3 font-weight-bold"> Phone-number</div>
            <div class="col-2 font-weight-bold"><a asp-action="Index" asp-route-sortOrder="@Model.SortByCity">@Html.DisplayNameFor(model => model.SortByCity)</a></div>
            <div class="col-2"></div>
        </div>
        <hr>
        @foreach (var item in Model.PeopleList)
        {
            <div class="row">
                <div class="col-10">
                    <partial name="_PersonPartial" for="@item" />
                </div>
                
                <div class="mb-2 mr-sm-2">
                    <form asp-action="Delete" method="post">
                        <input type="hidden" asp-for="@item.Id" />
                        <input class="btn btn-danger" type="submit" value="Delete" asp-controller="People" asp-action="Delete" asp-route-id="@item.Id" />
                    </form>
                </div>
                <div>
                    <form asp-action="Edit" method="get">
                        <input type="hidden" asp-for="@item.Id" />
                        <input class="btn btn-primary" type="submit" value="Edit" asp-controller="People" asp-action="Edit" asp-route-id="@item.Id" />
                    </form>
                </div>
            </div>
          }
    </div>
</div>

<br />

